
/* qz-tray.min.js - version 2.2.4 */
if(!window.qz){var qz=function(){var _qz={VERSION:"2.2.4",DEBUG:!1,log:{trace:function(t,...o){_qz.DEBUG&&console.log(t,...o)},err:function(t,o){_qz.DEBUG&&(console.error(t,o),o&&o.stack&&console.error(o.stack))},socketError:function(t,o){if(Array.isArray(t)){if(void 0===t[0])return void _qz.log.err("Unknown socket error");_qz.log.err(t[0],o),t=t[0]}else _qz.log.err(t,o);_qz.ws&&_qz.ws.send("closed::"+t),_qz.cfgSocket&&_qz.cfgSocket.ws&&_qz.cfgSocket.ws.send("closed::"+t)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID",printer:"PRINTER",file:"FILE",socket:"SOCKET"},ws:null,cfgSocket:{},websocketSuccess:!1,reconnect:{time:0,count:0,max:3,delay:5},connectTimeout:5,userClose:!1,deviceSearchParameters:{USB:["vendorId","productId","usb","usbClass","usbSubClass","usbProtocol","hidUsage","hidUsagePage","interface"],HID:["vendorId","productId","usb","usbClass","usbSubClass","usbProtocol","hidUsage","hidUsagePage","interface","serial","manufacturer"],SERIAL:["vendorId","productId","usb","usbClass","usbSubClass","usbProtocol","hidUsage","hidUsagePage","interface"],SOCKET:["host","port"],PRINTER:["name"]},printerCommandTypes:{RAW:"RAW",PS:"PS",PDF:"PDF",ESCPOS:"ESCPOS",ZPL:"ZPL",EPL:"EPL",BIN:"BIN",BINARY:"BINARY"},lastPrintData:null,lastPrintRaw:null,lastPrintFile:null,defaultConfig:{host:["localhost","localhost.qz.io"],usingSecure:!0,keepAlive:60,retries:0,delay:0,maxPrinterCallbacks:1,usePrinterName:!1,singlePrinterName:null,altPrinting:!1,alternatePrinter:null,recentPrinterName:null},connectionQueue:[],deployVersion:0,startTime:0,processingTime:0,processing:!1,pendingProcessing:!1,sslH:"wss://",encryption:null,signature:null,certificateSha1:null,certificatePromise:null,savePath:"",saveFile:[],saveBuffer:[],trigger:null,cookiePath:"",cookieParams:[],cookieSaved:!1};function getRsvpApi(){if(void 0!==RSVP)return _qz.log.trace("Using global RSVP"),RSVP;try{return _qz.log.trace("Using imported RSVP"),require("rsvp")}catch(t){return _qz.log.warn("RSVP not found"),null}}var RSVP=getRsvpApi();function isBool(t){return!(!t||!0!==t&&"true"!==t)}function isSuppressible(t,o){return void 0!==t[o.def]&&void 0!==o.suppressible&&void 0!==t[o.suppressible]&&isBool(t[o.suppressible])}function getDominant(t,o){return isSuppressible(t,o)?isBool(t[o.suppressible])?t[o.def]:void 0:t[o.def]}function getDefaults(t,o){return void 0!==t[o.def]?t[o.def]:o.defValue}function copyProperty(t,o,e){void 0!==t[o.name]&&(e[o.name]="object"===o.type?Object.assign({},t[o.name]):"array"===o.type?t[o.name].slice():t[o.name])}function copyPropertyScale(t,o,e){void 0!==t[o.name]&&("object"===o.type?e[o.name]=Object.assign({},t[o.name]):e[o.name]=t[o.name],"number"==typeof e[o.name]&&e[o.name]>=1&&(e[o.name]/=o.scaling))}function newPromise(t,o){return new RSVP.Promise((function(e,s){try{e(o?o(t):t)}catch(t){s(t)}}))}function processPrinter(t){if(void 0!==t)return"function"==typeof t?t():t;return null}function parse(t){if(void 0===t)return null;try{return JSON.parse(t)}catch(o){return t}}function uuid(){return Math.floor(16777216*Math.random()).toString(16).substring(1)}function isUnicode(t){return t&&t.length&&t.substring&&"\\u"==t.substring(0,2)&&t.length>=6}function unicodeToAscii(t){return isUnicode(t)?String.fromCharCode(parseInt(t.substring(2),16)):t}function unicodeToAsciiArray(t){if(_qz.tools.isArray(t)){for(var o=0;o<t.length;o++)"object"==typeof t[o]?t[o]=unicodeToAsciiArray(t[o]):t[o]=unicodeToAscii(t[o]);return t}return unicodeToAscii(t)}function handleError(t){return t}function deepCopy(t,o){for(var e in t)if(t.hasOwnProperty(e)){if("__type__"===e)continue;if(Array.isArray(t[e]))o[e]=t[e].slice();else if("object"==typeof t[e]&&null!==t[e]){void 0===o[e]&&(o[e]={});deepCopy(t[e],o[e])}else o[e]=t[e]}}function _chain(t,o,e,s){if(!RSVP)throw new Error("RSVP not loaded. Cannot support chaining calls. See qz.api.setPromiseType");if("string"==typeof t){if(!_qz.api.callbacks[t])throw new Error("Cannot find saved callback: "+t);t=_qz.api.callbacks[t]}"object"!=typeof o&&"function"!=typeof o&&(void 0!==o?o=[o]:o=[]);var r=void 0!==e?e:{},n;if(s&&"number"==typeof s&&s>0){n=new RSVP.Promise((function(e,n){t().then((function(t){r={data:t,count:s-1},e(r)}),(function(t){r={error:t,count:s},e(r)}))}))}else n=newPromise(t());return n}if(void 0!==window&&window.navigator&&navigator.userAgent&&navigator.userAgent.match(/Firefox\/([^ )\]]+)/)){var matches=navigator.userAgent.match(/Firefox\/([^ )\]]+)/);matches[1]&&parseFloat(matches[1])>=61&&"function"==typeof window.createImageBitmap&&!window.TouchEvent&&(window._createImageBitmap=window.createImageBitmap,window.createImageBitmap=function(t,...o){const e=o[o.length-1];let s;0!==o.length&&void 0!==e&&"object"==typeof e&&(void 0!==e.imageOrientation||void 0!==e.premultiplyAlpha||void 0!==e.colorSpaceConversion||void 0!==e.resizeWidth||void 0!==e.resizeHeight||void 0!==e.resizeQuality)?(s=e,o.pop()):s=null;return s&&"none"===s.premultiplyAlpha?new Promise((function(e,s){window._createImageBitmap.apply(this,[t,...o]).then((e=>{var r=document.createElement("canvas");r.width=e.width,r.height=e.height;const n=r.getContext("2d");n.drawImage(e,0,0),e&&e.close&&e.close();const i=n.getImageData(0,0,r.width,r.height);for(let t=0;t<i.data.length;t+=4)0===i.data[t+3]&&(i.data[t]=0,i.data[t+1]=0,i.data[t+2]=0);n.putImageData(i,0,0),window._createImageBitmap.apply(this,[r,0,0,r.width,r.height]).then((s=>{Object.defineProperty(s,"width",{writable:!1,value:e.width}),Object.defineProperty(s,"height",{writable:!1,value:e.height}),e(s)}),(function(t){s(t)}))}),(function(t){s(t)}))})):window._createImageBitmap.apply(this,[t,...o])},_qz.log.trace("Applied Firefox createImageBitmap fix"))}function resetMethods(){this.api=_qz.api={edition:null,title:null,version:{},dispatchPromise:function(t,o){return t(new RSVP.Promise((function(e,s){t=e,o=s}))),{resolve:t,reject:o}},promiseType:function(){return"RSVP"},setPromiseType:function(t){var o=!0;switch(t){case"esPromise":case"RSVP":case"Q":case"Angular":break;default:o=!1}return!!o&&(_qz.api.dispatchPromise=function(o,e){switch(t){case"esPromise":o(new Promise((function(t,s){o=t,e=s})));break;case"RSVP":o(new RSVP.Promise((function(t,s){o=t,e=s})));break;case"Q":var s=_qz.tools.ws.getVariable("Q"),r=s?s.defer():{resolve:o,reject:e};o(r.promise),o=r.resolve,e=r.reject;break;case"Angular":var s=_qz.tools.ws.getVariable("$q");if(s){var r=s.defer();o(r.promise),o=r.resolve,e=r.reject}}return{resolve:o,reject:e}},_qz.api.promiseType=function(){return t},_qz.log.trace("Promise type: "+t),!0)},api:function(){return _qz.websocket.init()},isActive:function(t){return"boolean"==typeof t&&(_qz.log.warn("Boolean isActive() is deprecated. Please use config object instead."),t={usingSecure:t}),void 0!==t&&"object"!=typeof t&&(_qz.log.warn("Unrecognized parameter for isActive(): "+t),t=void 0),_qz.tools.promise((function(o,e){var s=_qz.websocket.isActive(t);s?o(s):e(s)}))},connect:function(){return _qz.websocket.connect()},disconnect:function(){return _qz.websocket.disconnect()},printers:function(){return _qz.websocket.dataPromise("printers")},defaultPrinter:function(){return _qz.websocket.dataPromise("defaultPrinter")},getFileInfo:function(){return _qz.websocket.dataPromise("getFileInfo")},getSystemProperty:function(t){return _qz.websocket.dataPromise("getSystemProperty",{property:t})},getSystemProperties:function(){return _qz.websocket.dataPromise("getSystemProperties")},getNetworkInfo:function(t){var o={};return t&&(o.printer=t),_qz.websocket.dataPromise("getNetworkInfo",o)},getConnectedDevices:function(t){return _qz.websocket.dataPromise("getConnectedDevices",t)},callbacks:{error:handleError,printerList:null,printerStatus:null,networkInfo:null,fileInfo:null,systemInfo:null,usbInfo:null,displayUID:null,displayRemoved:null},security:{setCertificatePromise:function(t){return _qz.tools.promise((function(o,e){try{_qz.security.setCertificate(t,o)}catch(t){e(t)}}))}},setPromiseLib:function(t){return _qz.api.setPromiseType(t)},setPromiseReference:function(t){_qz.security.callbackRef=t},getVersion:function(){return _qz.VERSION},getQZVersion:function(){return _qz.websocket.dataPromise("getVersion")},setWebsocket:function(t){_qz.tools.ws.connection=t},setWebsocketActive:function(t){_qz.tools.ws.connection.full=t},setDebug:function(t){_qz.DEBUG=t},getDebug:function(){return _qz.DEBUG}},this.compatibility=_qz.compatibility={setCertificationCompatibility:function(t){if(void 0!==t.warnMultiple&&(_qz.compatibility.warnMultiple=t.warnMultiple),void 0!==t.ca)if("string"==typeof t.ca)_qz.compatibility.caCerts.push(t.ca);else if(Array.isArray(t.ca))_qz.compatibility.caCerts=_qz.compatibility.caCerts.concat(t.ca);else{_qz.log.warn("Unknown CA Type:",t.ca)}},getCertificationCompatibility:function(){return{warnMultiple:_qz.compatibility.warnMultiple,ca:_qz.compatibility.caCerts}},setSignatureAlgorithm:function(t){return _qz.compatibility.setAlgorithm(t)}},this.hid=_qz.hid={listDevices:function(t){return _qz.websocket.dataPromise("hid.listDevices",t)},openStream:function(t){var o={type:"open"};return normalize(t),_qz.websocket.dataPromise("hid.openStream",t,o)},closeStream:function(t){var o={type:"close"};return normalize(t),_qz.websocket.dataPromise("hid.closeStream",t,o)},setHidCallbacks:function(t){_qz.hid.handleHidData=t.processData,_qz.hid.handleHidClaimed=t.claimed,_qz.hid.handleHidClosed=t.closed,_qz.hid.handleHidError=t.error,_qz.hid.handleHidPacket=t.packet},setHidDataCallback:function(t){_qz.hid.handleHidData=t,_qz.log.warn("setHidDataCallback is deprecated. Please use setHidCallbacks instead.")},setHidClaimedCallback:function(t){_qz.hid.handleHidClaimed=t,_qz.log.warn("setHidClaimedCallback is deprecated. Please use setHidCallbacks instead.")},setHidClosedCallback:function(t){_qz.hid.handleHidClosed=t,_qz.log.warn("setHidClosedCallback is deprecated. Please use setHidCallbacks instead.")},setHidErrorCallback:function(t){_qz.hid.handleHidError=t,_qz.log.warn("setHidErrorCallback is deprecated. Please use setHidCallbacks instead.")},setHidRawPacketCallback:function(t){_qz.hid.handleHidPacket=t,_qz.log.warn("setHidRawPacketCallback is deprecated. Please use setHidCallbacks instead.")}};function normalize(t){if(t&&t.devices)if(Array.isArray(t.devices))for(var o=0;o<t.devices.length;o++)_qz.tools._normalizeHidOutput(t.devices[o]);else"object"==typeof t.devices&&(_qz.tools._normalizeHidOutput(t.devices),t.devices=[t.devices])}this.serial=_qz.serial={findPorts:function(){return _qz.websocket.dataPromise("serial.findPorts")},openPort:function(t){var o={type:"open"};return _qz.websocket.dataPromise("serial.openPort",t,o)},sendData:function(t){var o={type:"send"};if(t&&void 0!==t.data){if("number"==typeof t.data&&(t.data=[t.data]),"string"==typeof t.data||Array.isArray(t.data))return _qz.websocket.dataPromise("serial.sendData",t,o)}return _qz.tools.promise((function(t,o){o(new Error("Cannot send serial data: 'data' property is invalid or missing"))}))},closePort:function(t){return t&&void 0===t.port?_qz.tools.promise((function(t,o){o(new Error("Cannot close serial port: 'port' property is missing"))})):_qz.websocket.dataPromise("serial.closePort",t,{type:"close"})},setSerialCallbacks:function(t){_qz.serial.handleSerialData=t.processData,_qz.serial.handleSerialDiscovered=t.portDiscovered,_qz.serial.handleSerialOpened=t.portOpen,_qz.serial.handleSerialClosed=t.portClosed,_qz.serial.handleSerialError=t.error,_qz.serial.handleSerialReceived=t.dataReceived},setSerialDataCallback:function(t){_qz.serial.handleSerialData=t,_qz.log.warn("setSerialDataCallback is deprecated. Please use setSerialCallbacks instead.")},setSerialOpenedCallback:function(t){_qz.serial.handleSerialOpened=t,_qz.log.warn("setSerialOpenedCallback is deprecated. Please use setSerialCallbacks instead.")},setSerialClosedCallback:function(t){_qz.serial.handleSerialClosed=t,_qz.log.warn("setSerialClosedCallback is deprecated. Please use setSerialCallbacks instead.")},setSerialPortDiscoveredCallback:function(t){_qz.serial.handleSerialDiscovered=t,_qz.log.warn("setSerialPortDiscoveredCallback is deprecated. Please use setSerialCallbacks instead.")},setSerialErrorCallback:function(t){_qz.serial.handleSerialError=t,_qz.log.warn("setSerialErrorCallback is deprecated. Please use setSerialCallbacks instead.")},setSerialDataReceivedCallback:function(t){_qz.serial.handleSerialReceived=t,_qz.log.warn("setSerialDataReceivedCallback is deprecated. Please use setSerialCallbacks instead.")}},this.scales=_qz.scales={findScales:function(t){return _qz.websocket.dataPromise("scales.findScales",t)},openScaleStream:function(t){var o={type:"open"},e=function(t){t&&(t.scale&&"string"==typeof t.scale&&(t.scale={name:t.scale}),t.scale.hasOwnProperty("vendorId")&&"string"!=typeof t.scale.vendorId&&(t.scale.vendorId?t.scale.vendorId=t.scale.vendorId.toString(16):delete t.scale.vendorId),t.scale.hasOwnProperty("productId")&&"string"!=typeof t.scale.productId&&(t.scale.productId?t.scale.productId=t.scale.productId.toString(16):delete t.scale.productId))};return e(t),_qz.websocket.dataPromise("scales.openScaleStream",t,o)},closeScaleStream:function(t){var o={type:"close"},e=function(t){t&&(t.scale&&"string"==typeof t.scale&&(t.scale={name:t.scale}),t.scale.hasOwnProperty("vendorId")&&"string"!=typeof t.scale.vendorId&&(t.scale.vendorId?t.scale.vendorId=t.scale.vendorId.toString(16):delete t.scale.vendorId),t.scale.hasOwnProperty("productId")&&"string"!=typeof t.scale.productId&&(t.scale.productId?t.scale.productId=t.scale.productId.toString(16):delete t.scale.productId))};return e(t),_qz.websocket.dataPromise("scales.closeScaleStream",t,o)},setScaleCallbacks:function(t){_qz.scales.handleScaleData=t.processData,_qz.scales.handleScaleWeighing=t.weighing,_qz.scales.handleScaleClaimed=t.claimed,_qz.scales.handleScaleClosed=t.closed,_qz.scales.handleScaleError=t.error},setScaleDataCallback:function(t){_qz.scales.handleScaleData=t,_qz.log.warn("setScaleDataCallback is deprecated. Please use setScaleCallbacks instead.")},setScaleWeighingCallback:function(t){_qz.scales.handleScaleWeighing=t,_qz.log.warn("setScaleWeighingCallback is deprecated. Please use setScaleCallbacks instead.")},setScaleClaimedCallback:function(t){_qz.scales.handleScaleClaimed=t,_qz.log.warn("setScaleClaimedCallback is deprecated. Please use setScaleCallbacks instead.")},setScaleClosedCallback:function(t){_qz.scales.handleScaleClosed=t,_qz.log.warn("setScaleClosedCallback is deprecated. Please use setScaleCallbacks instead.")},setScaleErrorCallback:function(t){_qz.scales.handleScaleError=t,_qz.log.warn("setScaleErrorCallback is deprecated. Please use setScaleCallbacks instead.")}},this.cash=_qz.cash={openDrawer:function(t,o){var e={port:t};return _qz.websocket.dataPromise("cash.openDrawer",Object.assign(e,o))},setDrawerStatus:function(t){_qz.cash.handleCashStatus=t}},this.usb=_qz.usb={listDevices:function(t){return navigator.usb?_qz.tools.promise((function(t,o){navigator.usb.getDevices?t(navigator.usb.getDevices()):o(new Error("This browser does not support device listing"))})):_qz.tools.promise((function(t,o){o(new Error("This browser does not support WebUSB"))}))},requestDevice:function(t){return navigator.usb?_qz.tools.promise((function(o,e){if(!navigator.usb.requestDevice)return void e(new Error("This browser does not support requestDevice"));if(!t||!t.filters||!Array.isArray(t.filters)){if(!(t&&t.filters&&t.filters.hasOwnProperty("vendorId")))return void e(new Error("Missing or invalid 'filters' parameter"));t.filters=[t.filters]}try{navigator.usb.requestDevice(t).then((function(t){o(t)})).catch((function(t){e(t)}))}catch(t){e(t)}})):_qz.tools.promise((function(t,o){o(new Error("This browser does not support WebUSB"))}))}},this.display=_qz.display={findDisplays:function(){return _qz.websocket.dataPromise("display.findDisplays")},startListener:function(t){return _qz.websocket.dataPromise("display.startListener",t,{type:"started"})},stopListener:function(){return _qz.websocket.dataPromise("display.stopListener")},requestDisplay:function(t){return _qz.websocket.dataPromise("display.requestDisplay",t,{type:"found"})},getDisplayByUID:function(t){return _qz.websocket.dataPromise("display.getDisplayByUID",{uid:t})},clear:function(t,o){return o&&"boolean"==typeof o.clear&&!o.clear?_qz.websocket.dataPromise("display.resetDisplay",{display:t}):_qz.websocket.dataPromise("display.clearDisplay",{display:t})},showText:function(t,o){var e={display:t,data:o.data,row:o.row,col:o.col};return!1===o.clear?_qz.websocket.dataPromise("display.writeText",e):_qz.websocket.dataPromise("display.clearWrite",e)},showImage:function(t,o){var e={display:t};if(o){if(e.image=o.data,e.color=o.color,e.threshold=o.threshold,e.invert=o.invert,e.optimize=o.optimize,e.rotation=o.rotation,e.flipX=o.flipX,e.flipY=o.flipY,!e.image)throw new Error("Parameter 'data' is required for display.showImage")}return o&&!1===o.clear?_qz.websocket.dataPromise("display.writeImage",e):_qz.websocket.dataPromise("display.clearImage",e)},enableScreensaver:function(t,o){return void 0!==o&&!1!==o||(o=!0),_qz.websocket.dataPromise("display.enableScreensaver",{display:t,enabled:o})},setScreensaverInterval:function(t,o){return _qz.websocket.dataPromise("display.setScreensaverInterval",{display:t,interval:o})},setScreensaverImages:function(t,o){return _qz.websocket.dataPromise("display.setScreensaverImages",{display:t,images:o})},setScreensaverText:function(t,o){return _qz.websocket.dataPromise("display.setScreensaverText",{display:t,text:o})},setDisplayCallback:function(t){_qz.display.displayCallbacks.display=t},setDisplayRemovedCallback:function(t){_qz.display.displayCallbacks.removed=t},statusListener:function(t){return _qz.display.displayCallbacks=t,_qz.tools.promise((function(t,o){_qz.display.statusHandler={resolve:t,reject:o},_qz.websocket.dataPromise("display.addListener",null,{type:"change"}).catch((function(t){_qz.display.statusHandler=null,o(t)}))}))},clearListeners:function(){return _qz.display.displayCallbacks={},_qz.websocket.dataPromise("display.clearListeners")}},this.security=_qz.security={setPromiseLibrary:function(t){_qz.security.promise=t},setCertificate:function(t,o){return t=t||{},function(t,o){_qz.log.trace("Setting certificate"),!1!==t.signed&&(t.host||(t.host="localhost.qz.io")),t.host||(t.host=null);var e=null;_qz.certificateSha1=null;var s=null;if(t.alias&&"function"==typeof t.alias.load&&!t.certfile&&(t.certfile=t.alias),t.certfile&&"function"==typeof t.certfile.getPublicKey)try{s=t.certfile.getPublicKey(),e=s}catch(t){_qz.log.err(t)}return t.certfile&&t.certfile.certificate&&(e=t.certfile.certificate,s||(s=_qz.tools.extractCertData(e,"PUBLIC"))),_qz.certificatePromise=function(t,o){s?t(s):e?o(new Error("Public key data could not be retrieved from certificate")):o(new Error("No certificate available"))},_qz.security.callbackRef=o,_qz.websocket.isActive()&&_qz.websocket.send(_qz.websocket.getStream("security.setCertificate",t,e)),o&&o(s),s}(t,o)},setSigningMechanism:function(t){"string"==typeof t?(_qz.log.warn("String parameter for setSigningMechanism has been deprecated."),_qz.signAlgorithm=t):t.signMethod?"NONE"===t.signMethod.toUpperCase()?_qz.signingEnabled=!1:(_qz.signingEnabled=!0,_qz.signatureFactory=t):_qz.log.warn("No signature method was provided, secure websockets not guaranteed by formatter.")},setSignaturePromise:function(t){_qz.security.promise=t},sign:function(t,o,e){return"function"==typeof o?(_qz.tools.isBase64(t)&&(t=_qz.tools.getBase64Value(t)),_qz.tools.promise(_qz.security.promise,e,(function(e,s){try{o(t,e)}catch(t){s(t)}}))):_qz.signatureFactory?_qz.signatureFactory(t):_qz.tools.promise(_qz.security.promise,e,(function(t,o){o(new Error("A signature method must be set"))}))}},_qz.compatibility={protected:["#qz-backdrop","#qz-widget","#qz-flipper","#qz-wrapper"],warnMultiple:!0,caCerts:[],isBlocked:function(t){try{var o=t.toString();return o.indexOf("setKeyAlias")>-1||o.indexOf("keystore")>-1||o.indexOf("Failed to execute operation")>-1&&(_qz.tools.isFirefox()||o.indexOf("iterate")>-1)}catch(t){return!1}},displays:{toResetTimeouts:{},toCloseTimeouts:{}},authTypes:{NONE:0,BASIC:1,CERTIFICATE:2},authStatuses:{UNKNOWN:0,REQUEST_NA:1,PENDING:2,ACCEPTED:3,DENIED:4},VERSION_LOOKUP:["getQZVersion","qzVersion","qz.version"],finance:{},setAlgorithm:function(t){return void 0!==t&&"string"==typeof t&&["SHA1","SHA256","SHA512"].indexOf(t.toUpperCase())>-1&&(_qz.log.warn("Forced signature algorithm: "+(t=t.toUpperCase())),_qz.signAlgorithm=t,!0)}},this.logging=_qz.logging={setLevel:function(t){return _qz.websocket.dataPromise("logging.setLevel",{level:t})},getLevel:function(){return _qz.websocket.dataPromise("logging.getLevel")},getLogFiles:function(t=5){return _qz.log.trace("Request log files"),_qz.websocket.dataPromise("logging.getLogFiles",{limit:t})},getLogFile:function(t,o=0,e){return _qz.log.trace(`Request log file: ${t} limit: ${o} filter: ${e}`),_qz.websocket.dataPromise("logging.getLogFile",{fileName:t,limit:o,filter:e})},getDataFile:function(t,o=0,e){return _qz.log.trace(`Request data file: ${t} limit: ${o} filter: ${e}`),_qz.websocket.dataPromise("logging.getDataFile",{fileName:t,limit:o,filter:e})},clearLogFiles:function(){return _qz.log.trace("Clear logs files"),_qz.websocket.dataPromise("logging.clearLogFiles")},send:function(t,o){return _qz.websocket.dataPromise("logging.sendLog",{level:t,message:o})}},this.bluetooth=_qz.bluetooth={findDevices:function(t){return _qz.websocket.dataPromise("bluetooth.findDevices",t)}},this.websocket=_qz.websocket={isActive:function(t){return _qz.websocket.status(t)},connect:function(t){return _qz.tools.promise((function(o,e){if(_qz.websocket.isActive())try{_qz.websocket.setup.findConnection(t,o,e)}catch(t){e(t)}else _qz.websocket.isConnected()?o():_qz.websocket.setup.isUserConnectOpen()?e(new Error("Connection request already open")):_qz.websocket.setup.connectOnce(t,o,e)}))},disconnect:function(){return _qz.tools.promise((function(t,o){if(_qz.websocket.isActive())try{_qz.websocket.shutdown();let e=setTimeout((function(){_qz.log.warn("Disconnect handling took too long"),_qz.websocket.connection=null,t()}),1e3);_qz.websocket.closedWhenDone=function(){clearTimeout(e),t()}}catch(t){o(t)}else o(new Error("No active connection with QZ"))}))},status:function(t){return _qz.tools.promise((function(o,e){if(!_qz.websocket.connection)return e(new Error("No connection to QZ Tray"));_qz.websocket.connection.promise?_qz.websocket.connection.promise.dummy?o([!0,null]):o([!1,null]):try{_qz.websocket.dataPromise("websocket.getStatus",t||{}).then((function(t){o([!0,t])})).catch((function(t){_qz.log.error(t),o([!0,null])}))}catch(t){e(t)}}))}},this.storager=_qz.storager={saveState:function(t,o,e,s=!1){return _qz.websocket.dataPromise("storager.saveState",{store:t,key:o,value:e,remember:s})},listenToStorage:function(t,o,e=!1){return _qz.websocket.dataPromise("storager.listenToStorage",{store:t,key:o,remember:e})},removeFromStorage:function(t,o){return _qz.websocket.dataPromise("storager.removeFromStorage",{store:t,key:o})},setStorageCallbacks:function(t){_qz.storager.handleStorageData=t.processData,_qz.storager.handleStorageStored=t.stored,_qz.storager.handleStorageFound=t.storageFound,_qz.storager.handleStorageRemoved=t.storageRemoved,_qz.storager.handleStorageError=t.error}},this.file=_qz.file={setFileHandlers:function(t){_qz.file.writeHandlers=t.processData,_qz.file.writeHandlers=t.written,_qz.file.readHandlers=t.read,_qz.file.errorHandlers=t.error,_qz.log.warn("This function is deprecated. Please use qz.file.setFileCallbacks instead")},setFlatFileCallbacks:function(t){_qz.file.handleFileData=t.processData,_qz.file.handleFileWritten=t.written,_qz.file.handleFileRead=t.read,_qz.file.handleFileError=t.error},setFileCallbacks:function(t){_qz.file.handleFileData=t.processData,_qz.file.handleFileWritten=t.written,_qz.file.handleFileRead=t.read,_qz.file.handleFileError=t.error,_qz.file.handleFileListing=t.listed,_qz.file.handleFileDeleted=t.deleted,_qz.file.handleFileItem=t.item},write:function(t,o,e){var s={path:t,data:o};return e&&"object"==typeof e&&deepCopy(e,s),_qz.websocket.dataPromise("file.write",s,{type:"write"})},read:function(t,o){var e={path:t};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.read",e,{type:"read"})},remove:function(t,o){var e={path:t};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.remove",e,{type:"remove"})},list:function(t,o){var e={path:t};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.list",e,{type:"list"})},readAsArrayBuffer:function(t,o){var e={path:t,dataType:"bytes"};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.read",e,{type:"read"})},readAsText:function(t,o){var e={path:t,dataType:"string"};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.read",e,{type:"read"})},readAsJSON:function(t,o){var e={path:t,dataType:"json"};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.read",e,{type:"read"})},readAsBase64:function(t,o){var e={path:t,dataType:"base64"};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.read",e,{type:"read"})},readAsArray:function(t,o){var e={path:t,dataType:"array"};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.read",e,{type:"read"})},getSize:function(t,o){var e={path:t,dataType:"size"};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.read",e,{type:"read"})},getPermissions:function(t,o){var e={path:t,dataType:"permissions"};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.read",e,{type:"read"})},getModified:function(t,o){var e={path:t,dataType:"modified"};return o&&"object"==typeof o&&deepCopy(o,e),_qz.websocket.dataPromise("file.read",e,{type:"read"})},persistFile:function(t,o){return t&&o&&t.path&&o.path?_qz.websocket.dataPromise("file.persist",{from:t,to:o}):_qz.tools.promise((function(t,o){o(new Error("Both fromParams.path and toParams.path must be provided"))}))},asString:function(t){return"string"==typeof t?_qz.tools.promise((function(o){o(t)})):_qz.tools.promise((function(o,e){try{var s=new FileReader;s.onloadend=function(){o(s.result)},s.readAsText(new Blob([t]),"UTF-8")}catch(t){e(t)}}))},asBase64:function(t){return"string"==typeof t?_qz.tools.promise((function(o){o(t)})):_qz.tools.promise((function(o,e){try{var s=new FileReader;s.onloadend=function(){var t=s.result.indexOf(","),e=t>-1?s.result.substring(t+1):s.result;o(e)},s.readAsDataURL(new Blob([t]))}catch(t){e(t)}}))}},this.networking=_qz.networking={isHostReachable:function(t,o){return _qz.websocket.dataPromise("networking.isHostReachable",{host:t,timeout:o})},listNetworkInterfaces:function(){return _qz.websocket.dataPromise("networking.listNetworkInterfaces")},isPrivateAddress:function(t){return _qz.websocket.dataPromise("networking.isPrivateAddress",{address:t})}},this.system=_qz.system={listTempFiles:function(){return _qz.websocket.dataPromise("system.listTempFiles")},purgeTempFile:function(t){return _qz.websocket.dataPromise("system.purgeTempFile",{filename:t})}},this.clipboard=_qz.clipboard={setText:function(t,o){return _qz.websocket.dataPromise("clipboard.setText",{data:t,params:o})},setHtml:function(t,o){return _qz.websocket.dataPromise("clipboard.setHtml",{data:t,params:o})},setUrl:function(t,o){return _qz.websocket.dataPromise("clipboard.setUrl",{data:t,params:o})},setImage:function(t,o){return _qz.websocket.dataPromise("clipboard.setImage",{data:t,params:o})},getText:function(t){return _qz.websocket.dataPromise("clipboard.getText",{params:t})},getHtml:function(t){return _qz.websocket.dataPromise("clipboard.getHtml",{params:t})},getUrl:function(t){return _qz.websocket.dataPromise("clipboard.getUrl",{params:t})},getImage:function(t){return _qz.websocket.dataPromise("clipboard.getImage",{params:t})}},this.ui=_qz.ui={showMessage:function(t,o){return _qz.websocket.dataPromise("ui.showMessage",{message:t,params:o})}},this.browse=_qz.browse={openUrl:function(t,o){return _qz.websocket.dataPromise("browse.openUrl",{url:t,params:o})}},this.security.oauth=_qz.security.oauth={start:function(t){return _qz.websocket.dataPromise("oauth.start",t)},stop:function(){return _qz.websocket.dataPromise("oauth.stop")},isActive:function(){return _qz.websocket.dataPromise("oauth.isActive")},getCode:function(){return _qz.websocket.dataPromise("oauth.getCode")},setCodeCallback:function(t){_qz.security.oauth.codeReceived=t},setStopCallback:function(t){_qz.security.oauth.stopComplete=t}},this.monitoring=_qz.monitoring={setMonitoringCallbacks:function(t){_qz.monitoring.handleMonitoringData=t.processData,_qz.monitoring.handleMonitoringChange=t.change,_qz.monitoring.handleMonitoringDeviceChange=t.deviceChange},startListening:function(t){return _qz.websocket.dataPromise("monitoring.startListening",t)},stopListening:function(){return _qz.websocket.dataPromise("monitoring.stopListening")}},this.version=_qz.VERSION,this.version.qzTray=function(){return _qz.websocket.dataPromise("getQZVersion")},this.tools=_qz.tools;for(var t=0;t<_qz.compatibility.VERSION_LOOKUP.length;t++){var o=_qz.compatibility.VERSION_LOOKUP[t];Object.keys(window).indexOf(o)>-1&&(window[o]=Object.assign({},_qz,{VERSION:_qz.VERSION}))}_qz.startTime=new Date,Object.defineProperties(this,{printing:{get:function(){return _qz.printing}}})}return qz}();window.qz=qz;

